<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게시글 수정 - TalkSquare</title>
    <!-- create-post.css를 재사용 (스타일이 거의 같음) -->
    <link rel="stylesheet" href="../css/create-post.css">
</head>
<body>
    <!-- 헤더 -->
    <header class="header">
        <!-- 뒤로가기 버튼 -->
        <button class="btn-back" id="btnBack">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M15 18L9 12L15 6" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </button>
        
        <h1 class="logo">TalkSquare</h1>
        
        <!-- 프로필 아이콘 -->
        <div class="user-profile" id="userProfile">
            <div class="profile-icon">👤</div>
        </div>
    </header>

    <!-- 메인 컨텐츠 -->
    <main class="main-container">
        <!-- 제목만 '게시글 수정'으로 변경 -->
        <h2 class="page-title">게시글 수정</h2>
        
        <!-- 로딩 표시 -->
        <div class="loading" id="loading">
            <p>게시글을 불러오는 중...</p>
        </div>
        
        <!-- 에러 메시지 -->
        <div class="error-message" id="errorMessage" style="display: none;">
            <p>게시글을 불러오는데 실패했습니다.</p>
            <button onclick="history.back()">돌아가기</button>
        </div>
        
        <!-- 게시글 수정 폼 (처음엔 숨김 상태) -->
        <form id="editPostForm" class="post-form" style="display: none;">
            
            <!-- 제목 입력 -->
            <div class="form-group">
                <label for="title">제목*</label>
                <input 
                    type="text" 
                    id="title" 
                    name="title"
                    placeholder="제목을 입력해주세요. (최대 26글자)" 
                    maxlength="26"
                    required
                >
                <p class="helper-text" id="titleHelper">* helper text</p>
            </div>

            <!-- 내용 입력 -->
            <div class="form-group">
                <label for="content">내용*</label>
                <textarea 
                    id="content" 
                    name="content"
                    placeholder="내용을 입력해주세요."
                    rows="10"
                    required
                ></textarea>
                <p class="helper-text" id="contentHelper">* helper text</p>
            </div>

            <!-- 이미지 업로드 (선택사항) -->
            <div class="form-group">
                <label for="postImage">이미지</label>
                <div class="image-upload-container">
                    <!-- 파일 선택 버튼 -->
                    <label for="postImage" class="btn-file-select">
                        파일 선택
                    </label>
                    <input 
                        type="file" 
                        id="postImage" 
                        name="postImage"
                        accept="image/*"
                        style="display: none;"
                    >
                    <!-- 선택된 파일명 표시 -->
                    <span class="file-name" id="fileName">파일을 선택해주세요</span>
                </div>
                <p class="helper-text">* 이미지 변경은 선택사항입니다</p>
                
                <!-- 이미지 미리보기 -->
                <div class="image-preview" id="imagePreview" style="display: none;">
                    <img id="previewImage" src="" alt="미리보기">
                    <button type="button" class="btn-remove-image" id="btnRemoveImage">✕</button>
                </div>
            </div>

            <!-- 수정 완료 버튼 -->
            <button type="submit" class="btn-submit" id="btnSubmit">수정 완료</button>
        </form>
    </main>

    <!-- JavaScript 파일 로드 (순서 중요!) -->
    <script src="../js/config/constants.js"></script>
    <script src="../js/utils/auth.js"></script>
    <script src="../js/utils/validation.js"></script>
    <script src="../js/utils/api.js"></script>
    <!-- 게시글 수정 전용 JavaScript -->
    <script src="../js/pages/edit-post.js"></script>
</body>
</html>